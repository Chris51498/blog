<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>	
		<link rel="stylesheet" type="text/css" href="../css/easyui.css"/>
		<!--2.引入图标的样式文件-->
		<link rel="stylesheet" type="text/css" href="../css/icon.css"/>
		<!--3.引入jQuery文件-->
		<script src="../js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<!--4.引入easyUI js文件-->
		<script src="../js/jquery.easyui.min.js" type="text/javascript" charset="utf-8"></script>
		<!--语言支持 简体中文-->
		<script src="../js/easyui-lang-zh_CN.js" type="text/javascript" charset="utf-8"></script>
		<!--引入css-->
		<link rel="stylesheet" type="text/css" href="../css/index.css"/>
</head>
<body>
	
	<style>
		.yc_add li{
			width:400px;
			margin-top:20px;
		}
		
		.yc_add li label{
			display:inline-block;
			width:150px;
			text-align:right;
		}
		
		.yc_add li input{
			width:200px;
		}
		
	</style>
	
	<div class="yc_good">
		<form id="yc_addgood">
			<ul class="yc_add">
				<li><label>商品类型：</label><input id="yc_type" class="easyui-combobox"></li>
				<li><label>商品名称：</label><input id="gname" class="easyui-textbox"></li>
				<li><label>商品价格：</label><input id="price" class="easyui-numberbox" data-options="min:0,precision:2"></li>
				<li><label>商品单位：</label><input id="unit" class="easyui-textbox"></li>
				<li><label>商品净重：</label><input id="weight" class="easyui-textbox"></li>
				<li><label>保质期：</label><input id="qperied" class="easyui-datebox"></li>
				<li><label>商品库存：</label><input id="balance" class="easyui-numberbox" data-options="min:0"></li>
				<li><label>商品图片：</label><input id="pics" name="pics" type="file"></li>
				<li><label>商品简介：</label><textarea id="intro" style="width:200px"></textarea></li>
				<li><label>商品描述：</label><textarea id="descr" style="width:200px"></textarea></li>
				<li><label></label><a class="easyui-linkbutton" href="javascript:add()">添加商品</a></li>
			</ul>
		</form>
	</div>
	
	<!-- 引入ajaxFileUpload -->
	<script type="text/javascript" src="../js/ajaxfileupload.js"></script>
	<script type="text/javascript">
		//加载数据   获取商品类型列表
		$("#yc_type").combobox({
			url:'../../goodsType.action?op=find',
			valueField:'tno',
			textField:'tname'
		});
		
		
		//添加商品
		function add(){
			var tno= $('#yc_type').val();
			var gname= $('#gname').val();
			var price= $('#price').val();
			var unit= $('#unit').val();
			var weight= $('#weight').val();
			var qperied= $('#qperied').val();
			var balance= $('#balance').val();
			var intro= $('#intro').val();
			var descr= $('#descr').val();
			
			$.ajaxFileUpload({
				url:'../goodFileUpload.action',
				secureuri:false,
				fileElementId:'pics',
				dataType:'json',
				data:{tno:tno,gname:gname,price:price,unit:unit,weight:weight,qperied:qperied,balance:balance,intro:intro,descr:descr},
				success:function(data){
					if(data>0){
						//清空文本框
						$.messager.show({
							title:'温馨提示',
							msg:'商品添加成功',
							timeout:5000,
							showType:'slide'
						});
						$('#yc_type').combobox('clear');
						$('#gname').textbox('setValue');
						$('#price').numberbox("setValue","");
						$('#unit').textbox('setValue');
						$('#weight').textbox('setValue');
						$('#qperied').combo('setText','');
						$('#balance').numberbox("setValue","");
						$('#intro').val("");
						$('#descr').val("");
						$('#pics').val("");
					}else{
						$.messager.alert('警告','商品添加失败');
					}
				}
			});
		}
	</script>
</body>
</html>