<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title>Myblog</title>
		<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
		<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
		<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
		
		<style type="text/css">
			#yc_login_1{
				width: 400px;
				text-align:center;
				margin: 0 auto;
			}
			
			#yc_personal_1{
				background-color: cadetblue;
				width: 210px; 
				height: 200px;
				position: fixed;
				top: 150px;
				left: 310px;
			}
			
		</style>
	</head>

	<body>
	
		<div id="yc_personal_1">
			<ul class="list-group">
				<a href="index.html" class="list-group-item active" style="background:black;text-align:center;height:100px">
				        <h4 class="list-group-item-heading" style="margin-top:15px">MyBlog</h4>
				        <h6 style="margin-top:20px">心有猛虎，细嗅蔷薇</h6>
				</a>
				
			    <a href="#" class="list-group-item">
			    	<span class="glyphicon glyphicon-home"></span>&nbsp;&nbsp;&nbsp;&nbsp;首页
				</a>
					
			    <a href="#" class="list-group-item">
					<span class="glyphicon glyphicon-user"></span>&nbsp;&nbsp;&nbsp;&nbsp;关于
				</a>
				
				<a href="#" class="list-group-item">
			        <span class="glyphicon glyphicon-th-list"></span>&nbsp;&nbsp;&nbsp;&nbsp;归档
			    </a>
				
			   
			    <div id="yc_tags">
				    <li class="dropdown" style="list-style:none;">
					    <a href="#" class="list-group-item dropdown-toggle" data-toggle="dropdown">
							<span class="glyphicon glyphicon-th"></span>&nbsp;&nbsp;&nbsp;&nbsp;分类
						</a>
				            <span class="caret"></span></a>
				        <ul class="dropdown-menu" style="width:210px;height:120px">
				            <li>
				                <a href="#" class="list-group-item" style="height:38px;line-height:34px;margin-top:-3px">
							       <span class="glyphicon glyphicon-tag"></span>&nbsp;&nbsp;&nbsp;&nbsp;分类2
							    </a>
							</li>
							
				            <li>
				                <a href="#" class="list-group-item" style="height:38px;line-height:34px">
							       <span class="glyphicon glyphicon-tag"></span>&nbsp;&nbsp;&nbsp;&nbsp;分类2
							    </a>
							</li>
							
				            <li>
				                <a href="#" class="list-group-item" style="height:38px;line-height:34px">
							       <span class="glyphicon glyphicon-tag"></span>&nbsp;&nbsp;&nbsp;&nbsp;分类2
							    </a>
							</li>
				        </ul>
				    </li>
			    </div>   
			    
			    
			</ul>
		</div>
	
		<div class="container" style="width: 45%; height:500px%">
		
		
			<div id="yc_login">
				<!-- 模态框（Modal） 登录-->
				<div class="modal fade" id="myModal_1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content" id="yc_login_1">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
									&times;
								</button>
								<h4 class="modal-title" id="myModalLabel">
									<label style="align-content: center;">登录</label>
								</h4>
							</div>
							
							<div class="modal-body" >
								<form class="form-horizontal" role="form">
									<div class="form-group">
										<label for="firstname" class="col-sm-3 control-label">昵&nbsp;&nbsp;&nbsp;&nbsp;称</label>
										<div class="col-sm-8">
											<input type="text" id="nickname" v-model="nickname" class="form-control" placeholder="请输入昵称">
										</div>
									</div>
									
									<div class="form-group">
										<label for="lastname" class="col-sm-3 control-label">密&nbsp;&nbsp;&nbsp;&nbsp;码</label>
										<div class="col-sm-8">
											<input type="password" id="pwd" v-model="pwd" class="form-control" placeholder="请输密码">
										</div>
									</div>
									
									<div class="form-group">
										<label for="lastname" class="col-sm-3 control-label">验证码</label>
										<div class="col-sm-5">
											<input type="text" id="yzm" v-model="yzm" class="form-control"  placeholder="请输验证码">
										</div>
										
										<div style="margin-right:45px">
							                <img src="verifyCodeServlet" id="yzm_img" />
							            </div>
									</div>
									
									<div class="form-group">
										<input class="btn btn-default" type="button" @click="login" value="登录">
									</div>
								</form>
							</div>
						</div><!-- /.modal-content -->
					</div><!-- /.modal -->
				</div>
			</div>						
									
									
									
			<!-- 模态框（Modal）注册 -->
			<div class="modal fade" id="myModal_2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content" id="yc_login_1" style="width:450px">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
								&times;
							</button>
							<h4 class="modal-title" id="myModalLabel">
								<label style="align-content: center;">注册</label>
							</h4>
						</div>
						
						<div class="modal-body" >
							<form class="form-horizontal" role="form">
								<div class="form-group">
									<label for="firstname" class="col-sm-3 control-label">昵&nbsp;&nbsp;&nbsp;&nbsp;称</label>
									<div class="col-sm-6">
										<input type="text" class="form-control" id="nickname2"  placeholder="请输入用户名" onblur="checkName()">
									</div>
									<span id="tishi" style="float:left;height:38px;line-height:38px">必填</span>
								</div>
								
								<div class="form-group">
									<label for="lastname" class="col-sm-3 control-label">密&nbsp;&nbsp;&nbsp;&nbsp;码</label>
									<div class="col-sm-6">
										<input type="password" class="form-control" id="pwd2" onblur="checkPwd()" placeholder="请输密码">
									</div>
									<span id="tishiPwd" style="float:left;height:38px;line-height:38px">必填</span>
								</div>
								
								<div class="form-group">
									<label for="firstname" class="col-sm-3 control-label">邮&nbsp;&nbsp;&nbsp;&nbsp;箱</label>
									<div class="col-sm-8">
										<input type="text" class="form-control" id="email" placeholder="请输入邮箱">
									</div>
								</div>
								
								<div class="form-group">
									<label for="inputfile" class="col-sm-3 control-label">头&nbsp;&nbsp;&nbsp;&nbsp;像</label>
									<div class="col-sm-8">
										<input type="file" id="u_pic" name="u_pic">
									</div>
								</div>
								
								
								<div class="form-group">
									<input class="btn btn-default" type="button" onclick="add()" value="注册" data-dissmiss="modal"  >
								</div>
							</form>
						</div>
					</div><!-- /.modal-content -->
				</div><!-- /.modal -->
			</div>
			
			
			
			<div class="row clearfix">
				<div class="col-md-12 column">
					
					<div id="yc_header">
						
						<nav class="navbar navbar-default" role="navigation">
							<div class="navbar-header">
								<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
								<a class="navbar-brand" href="#">MyBlog</a>
							</div>
	
							<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
								<ul class="nav navbar-nav">
									<li class="active">
										<a href="#">首页</a>
									</li>
									
									<li class="dropdown">
										<a href="#" class="dropdown-toggle" data-toggle="dropdown">分类<strong class="caret"></strong></a>
										<ul class="dropdown-menu">
											<li>
												<a href="#">Action</a>
											</li>
											<li>
												<a href="#">Another action</a>
											</li>
											<li>
												<a href="#">Something else here</a>
											</li>
											<li class="divider">
											</li>
											<li>
												<a href="#">Separated link</a>
											</li>
											<li class="divider">
											</li>
											<li>
												<a href="#">One more separated link</a>
											</li>
										</ul>
									</li>
									
									<li>
										<a href="#">关于我</a>
									</li>
									
								</ul>
								
								
								<form class="navbar-form navbar-left" role="search">
									<div class="form-group">
										<input type="text" class="form-control" />
									</div> <button type="submit" class="btn btn-default">搜索</button>
								</form>
								
								
								<ul class="nav navbar-nav navbar-right">
									<li><a data-toggle="modal" data-target="#myModal_1">登录</span></a></li>
									<li><a data-toggle="modal" data-target="#myModal_2" >注册</a></li>
								</ul>
							</div>
	
						</nav>
					</div>
					
					<div class="jumbotron">
						<h1>Hello, world!</h1>
						<p>
							This is a template for a simple marketing or informational website. It includes a large callout called the hero unit and three supporting pieces of content. Use it as a starting point to create something more unique.
						</p>
						<p>
							<a class="btn btn-primary btn-large" href="#">Learn more</a>
						</p>
					</div>
					
					
					<div class="row clearfix">
						
						<div class="col-md-4 column">
							<h2>
						Heading
					</h2>
							<p>
								Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
							</p>
							<p>
								<a class="btn" href="#">View details »</a>
							</p>
						</div>
						
						
						<div class="col-md-4 column">
							<h2>
						Heading
					</h2>
							<p>
								Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
							</p>
							<p>
								<a class="btn" href="#">View details »</a>
							</p>
						</div>
						
						
						<div class="col-md-4 column">
							<h2>
						Heading
					</h2>
							<p>
								Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
							</p>
							<p>
								<a class="btn" href="#">View details »</a>
							</p>
						</div>
						
						<div class="col-md-4 column">
							<h2>
						Heading
					</h2>
							<p>
								Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
							</p>
							<p>
								<a class="btn" href="#">View details »</a>
							</p>
						</div>
						
						
						<div class="col-md-4 column">
							<h2>
						Heading
					</h2>
							<p>
								Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
							</p>
							<p>
								<a class="btn" href="#">View details »</a>
							</p>
						</div>
						
						<div class="col-md-4 column">
							<h2>
						Heading
					</h2>
							<p>
								Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
							</p>
							<p>
								<a class="btn" href="#">View details »</a>
							</p>
						</div>
						
						<div class="col-md-4 column">
							<h2>
						Heading
					</h2>
							<p>
								Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
							</p>
							<p>
								<a class="btn" href="#">View details »</a>
							</p>
						</div>
						
						<div class="col-md-4 column">
							<h2>
						Heading
					</h2>
							<p>
								Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
							</p>
							<p>
								<a class="btn" href="#">View details »</a>
							</p>
						</div>
						
						<div class="col-md-4 column">
							<h2>
						Heading
					</h2>
							<p>
								Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
							</p>
							<p>
								<a class="btn" href="#">View details »</a>
							</p>
						</div>
					</div>





					<ul class="pagination">
						<li>
							<a href="#">Prev</a>
						</li>
						<li>
							<a href="#">1</a>
						</li>
						<li>
							<a href="#">2</a>
						</li>
						<li>
							<a href="#">3</a>
						</li>
						<li>
							<a href="#">4</a>
						</li>
						<li>
							<a href="#">5</a>
						</li>
						<li>
							<a href="#">Next</a>
						</li>
					</ul>
					<div class="row clearfix">
						<div class="col-md-12 column">
							xxxxx
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>

	<script src="js/jquery.min.js"></script>
	<script src="js/vue.js"></script>
	<script src="js/axios.js"></script>
	<script src="js/qs.js"></script>
	<script src="js/ajaxfileupload.js"></script>

	<script type="text/javascript">
		var yc_login = new Vue({
			el:'#yc_login',
			data:{
				nickname:'',
				pwd:'',
				yzm:''
			},
		
			methods:{
    			login:function(){
    				//发送axios请求
    				axios({
    					url:'user.action',
    					method:'post',
    					params:{op:'login',nickname:this.nickname,pwd:this.pwd,yzm:this.yzm}
    				}).then(result=>{
    					if(result.data==-1){
    						alert("验证码错误！！");
    					}else if(result.data>0){
    						alert("欢迎进入MyBlog");
    						window.location.href="index.html";
    					}else{
    						alert("登录失败！！");
    					}
    				});
    			}
    		}
		});
		
		
		//用户注册
		function add(){
			var nickname= $('#nickname2').val();
			var pwd= $('#pwd2').val();
			var email= $('#email').val();
			
			var tishi = $('#tishi').html();
			var tishiPwd = $('#tishiPwd').html();
			if('昵称不能为空' == tishi || '昵称已注册' == tishi || '密码不能为空'==tishiPwd){
				alert("注册失败，请检查注册信息重新注册！！！");
				return false;
			}
			
			if(nickname==''||pwd==''||email==''){
				alert("必填项不能为空！！");
				return false;
			}
			
			$.ajaxFileUpload({
				url:'userFileUpload.action',
				secureuri:false,
				fileElementId:'u_pic',
				dataType:'json',
				data:{nickname:nickname,pwd:pwd,email:email},
				success:function(data){
					if(data>0&&null!=data){
						//注册成功跳转登录页面
						alert("注册成功！！");
						window.location.href="index.html";
					}else{
						$.messager.alert('警告','注册失败');
					}
				}
			});
		}
		
		//检查用户名
		function checkName(){
			var nickname= $('#nickname2').val();
			if(null==nickname || ''==nickname){
				$('#tishi').html('昵称不能为空');
				return false;
			}
			
			//发送请求，检查用户名是否被注册
			$.get('user.action?op=find',{nickname:nickname},function(data){
				if(data!=0 || data != ""){
					$('#tishi').html('昵称已注册');
					return false;
				}else{
					$('#tishi').html('昵称可用');
					return true;
				}
			},'json');
		}
		
		//检查密码是否为空
		function checkPwd(){
			var pwd= $('#pwd2').val();
			if(null==pwd || ''==pwd){
				$('#tishiPwd').html('密码不能为空');
				return false;
			}
		}
		
		
	</script>




</html>